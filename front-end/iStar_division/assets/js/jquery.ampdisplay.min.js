// JavaScript Document
(function ($)
{
    $.fn.reverse = [].reverse;
})(jQuery);
(function ($)
{
    $.browser.msieLTE7 = ($.browser.msie && parseInt($.browser.version) < 7);
    $.browser.msieLTE8 = ($.browser.msie && parseInt($.browser.version) < 8);
    $.browser.msie7 = ($.browser.msie && parseInt($.browser.version) == 7);
    $.browser.msie8 = ($.browser.msie && parseInt($.browser.version) == 8);
    $.browser.touch = ("ontouchstart" in window);
})(jQuery);
(function ($)
{
    $.fn.switchPanel = function (options)
    {
        var opt = $.extend(
        {
            hoverElement: function (panel)
            {
                return $(panel).parent();
            },
            effect: "blur"
        }, options);
        if (!this.length)
        {
            return this;
        }
        $(this).each(function ()
        {
            var sp = this;
            if (sp.switchPanel)
            {
                return;
            }
            sp.switchPanel = {
                outerHeight: $(sp).outerHeight()
            };
            var shown = {};
            var hidden = {};
            if (opt.effect == "slide" || opt.effect == "both")
            {
                shown.bottom = 0;
                hidden.bottom = "-" + sp.switchPanel.outerHeight + "px";
            }
            if (opt.effect == "blur" || opt.effect == "both")
            {
                shown.opacity = 1;
                hidden.opacity = 0;
            }
            if ($.browser.msie)
            {
                $(sp).hide();
            }
            else
            {
                $(sp).animate(hidden, 0);
            }
            $(opt.hoverElement(sp)).hover(function ()
            {
                if ($.browser.msie)
                {
                    $(sp).show();
                    return;
                }
                $(sp).stop(false, false).animate(shown, "fast");
            }, function ()
            {
                if ($.browser.msie)
                {
                    $(sp).hide();
                    return;
                }
                $(sp).stop(false, false).animate(hidden, "normal");
            });
            $(sp).css("left", "0");
        });
        return $(this);
    };
})(jQuery);
(function ($)
{
    $.fn.hoverClass = function (c)
    {
        return $(this).hover(function ()
        {
            $(this).addClass(c || "hover");
        }, function ()
        {
            $(this).removeClass(c || "hover");
        });
    };
})(jQuery);
(function ($)
{
    $.fn.expander = function (options)
    {
        var conf = $.extend(
        {
            termSelector: ".term",
            termActiveClass: "term-active",
            animate: true
        }, options);
        if (!this.length)
        {
            return this;
        }
        if (this.isExpander)
        {
            return;
        }
        this.isExpander = true;
        $(this).find(conf.termSelector).click(function (e)
        {
            e.preventDefault();
            if (!$(this).parent().hasClass(conf.termActiveClass))
            {
                if (conf.animate)
                {
                    $(this).parent().next().slideDown("fast", function ()
                    {
                        $(this).prev().addClass(conf.termActiveClass);
                    });
                }
                else
                {
                    $(this).parent().next().css("zoom", "1").show().prev().addClass(conf.termActiveClass);
                }
            }
            else
            {
                if (conf.animate)
                {
                    $(this).parent().next().slideUp("fast", function ()
                    {
                        $(this).prev().removeClass(conf.termActiveClass);
                    });
                }
                else
                {
                    $(this).parent().next().css("zoom", null).hide().prev().removeClass(conf.termActiveClass);
                }
            }
        }).each(function ()
        {
            $(this).parent().next().hide();
        });
    };
})(jQuery);
(function ($)
{
    $.fn.carrousel = function (options)
    {
        var conf = $.extend(
        {
            onPartActivate: function (i, part)
            {},
            onPartDeactivate: function (i, part)
            {},
            partWidth: false,
            nrShowAtOnce: false,
            startingPart: 0,
            rotateOnClick: true
        }, options);
        if (!this.length || $(this).children().length == 0)
        {
            return this;
        }
        $(this).each(function ()
        {
            var dg = this;
            if (this.carrousel)
            {
                return this;
            }
            var parts = $(this).children();
            conf.partWidth = conf.partWidth === false ? $(parts[0]).outerWidth(true) : conf.partWidth;
            conf.nrShowAtOnce = conf.nrShowAtOnce === false ? Math.round($(this).parent().width() / conf.partWidth) : conf.nrShowAtOnce;
            var prevButton = $("<a href='#' class='imgreplace carrousel-prev'>prev</a>")[0];
            var nextButton = $("<a href='#' class='imgreplace carrousel-next'>next</a>")[0];
            var centeredPartIndex = 0;
            if (parts.length > conf.nrShowAtOnce)
            {
                $(dg).parent().after(prevButton).after(nextButton);
                $(prevButton).click(function (e)
                {
                    e.preventDefault();
                    e.stopPropagation();
                    dg.carrousel.scrollLeft(1);
                });
                $(nextButton).click(function (e)
                {
                    e.preventDefault();
                    e.stopPropagation();
                    dg.carrousel.scrollRight(1);
                });
                centeredPartIndex = 1;
            }
            if (conf.rotateOnClick)
            {
                $(parts).click(function (e)
                {
                    e.preventDefault();
                    dg.carrousel.activatePart($(this).prevAll().length);
                    e.stopPropagation();
                });
            }
            if ($.browser.touch)
            {
                var touchmove = false;
                var touchstartx;
                var sensitivity = 5;
                $(parts).bind("touchstart", function (e)
                {
                    e = e.originalEvent;
                    if (e.changedTouches.length == 1)
                    {
                        var touch = e.touches[0];
                        if (touch)
                        {
                            touchstartx = touch.pageX;
                        }
                    }
                    return true;
                });
                $(parts).bind("touchmove", function (e)
                {
                    e.preventDefault();
                    if (touchmove)
                    {
                        return true;
                    }
                    e = e.originalEvent;
                    if (e.changedTouches.length == 1 && !touchmove)
                    {
                        touchmove = true;
                        var touch = e.changedTouches[0];
                        if ((touchstartx > touch.pageX) && (touchstartx - touch.pageX > sensitivity))
                        {
                            dg.carrousel.scrollRight(2);
                        }
                        else
                        {
                            if ((touchstartx < touch.pageX) && (touch.pageX - touchstartx > sensitivity))
                            {
                                dg.carrousel.scrollLeft(2);
                            }
                        }
                    }
                    return true;
                });
                $(parts).bind("touchend", function (e)
                {
                    if (!touchmove)
                    {
                        var url = $(e.target).parent().attr("href");
                        if (url && "#" != url)
                        {
                            window.location = url;
                        }
                        else
                        {
                            dg.carrousel.activatePart($(this).prevAll().length);
                        }
                    }
                    else
                    {
                        touchmove = false;
                    }
                    return true;
                });
            }
            this.carrousel = {
                scrollRight: function (i)
                {
                    dg.carrousel.centerPart(dg.carrousel.centeredPartIndex + i);
                },
                scrollLeft: function (i)
                {
                    dg.carrousel.centerPart(dg.carrousel.centeredPartIndex - i);
                },
                parts: parts,
                prevButton: prevButton,
                nextButton: nextButton,
                partWidth: conf.partWidth,
                centeredPartIndex: centeredPartIndex,
                activatePart: function (i, force)
                {
                    dg.carrousel.deactivateAllParts();
                    if (dg.carrousel.parts[i])
                    {
                        $(dg.carrousel.parts[i]).addClass("active");
                        dg.carrousel.centerPart(i, force);
                        conf.onPartActivate(i, dg.carrousel.parts[i]);
                    }
                },
                deactivate: function (i)
                {
                    if (dg.carrousel.parts[i])
                    {
                        $(dg.carrousel.parts[i]).removeClass("active");
                    }
                    conf.onPartDeactivate(i, dg.carrousel.parts[i]);
                },
                deactivateAllParts: function ()
                {
                    $(dg.carrousel.parts).each(function (i)
                    {
                        if ($(this).hasClass("active"))
                        {
                            dg.carrousel.deactivate(i);
                        }
                    });
                },
                centerPart: function (i, force)
                {
                    if (i > Math.ceil(conf.nrShowAtOnce / 2) - 1)
                    {
                        $(dg.carrousel.prevButton).removeClass("disabled-prev");
                    }
                    else
                    {
                        $(dg.carrousel.prevButton).addClass("disabled-prev");
                    }
                    if (i < dg.carrousel.parts.length - (Math.ceil(conf.nrShowAtOnce / 2)))
                    {
                        $(dg.carrousel.nextButton).removeClass("disabled-next");
                    }
                    else
                    {
                        $(dg.carrousel.nextButton).addClass("disabled-next");
                    }
                    var center = i;
                    if (force)
                    {
                        if (conf.startingPart <= Math.floor(conf.nrShowAtOnce / 2) - 1)
                        {
                            center = Math.ceil(conf.nrShowAtOnce / 2) - 1;
                        }
                        if (conf.startingPart >= dg.carrousel.parts.length - (Math.floor(conf.nrShowAtOnce / 2)))
                        {
                            center = dg.carrousel.parts.length - (Math.ceil(conf.nrShowAtOnce / 2));
                        }
                    }
                    if (center >= dg.carrousel.parts.length - 1)
                    {
                        center = dg.carrousel.parts.length - 2;
                    }
                    else
                    {
                        if (center < 1)
                        {
                            center = 1;
                        }
                    }
                    if (center > Math.floor(conf.nrShowAtOnce / 2) - 1 && center < dg.carrousel.parts.length - (Math.floor(conf.nrShowAtOnce / 2)))
                    {
                        $(dg).stop(true).animate(
                        {
                            "left": (dg.carrousel.partWidth * (center - 1) * -1) + "px"
                        });
                        dg.carrousel.centeredPartIndex = center;
                    }
                }
            };
            if (!conf.startingPart)
            {
                $(parts).each(function (i)
                {
                    if ($(this).is(".active"))
                    {
                        conf.startingPart = i;
                    }
                });
            }
            if (parts.length <= conf.nrShowAtOnce)
            {
                conf.startingPart = 0;
            }
            this.carrousel.activatePart(conf.startingPart, true);
            this.carrousel.centerPart(this.carrousel.centeredPartIndex);
        });
        return $(this);
    };
})(jQuery);
(function ($)
{
    $.fn.detailGallery = function (options)
    {
        var conf = $.extend(
        {
            showroom: $([])
        }, options);
        if (!this.length)
        {
            $(conf.showroom).children().not(":first").hide();
            return this;
        }
        $(this).each(function ()
        {
            if (this.detailGallery)
            {
                return this;
            }
            this.detailGallery = true;
            $("img.active", this).wrap("<span/>");
            var parts = $(this).children();
            if ($.browser.msieLTE7)
            {
                parts.hover(function ()
                {
                    $("span", this).show().css("zoom", "1");
                    $(".inactive", this).hide();
                }, function ()
                {
                    if ($(this).is(".active"))
                    {
                        return;
                    }
                    $("span", this).hide();
                    $(".inactive", this).show().css("zoom", "1");
                });
            }
            var showroomParts = $(conf.showroom).children().hide();
            $(this).carrousel(
            {
                onPartActivate: function (i)
                {
                    if (showroomParts[i])
                    {
                        $(showroomParts[i]).show().find("img").each(function ()
                        {
                            if ($(this).attr("src"))
                            {
                                $(this).attr("src", $(this).attr("src").replace(/#/, ""));
                            }
                        });
                    }
                },
                onPartDeactivate: function (i)
                {
                    if (showroomParts[i])
                    {
                        $(showroomParts[i]).hide();
                    }
                }
            });
        });
        return this;
    };
})(jQuery);
(function ($)
{
    $.fn.variantCarrousel = function (options)
    {
        var conf = $.extend(
        {}, options);
        if (!this.length)
        {
            return this;
        }
        $(this).each(function ()
        {
            var carr = this;
            if (this.variantCarrousel)
            {
                return this;
            }
            this.variantCarrousel = true;
            var parts = $(this).children();
            carr.infoText = $("<div class='info-text'>asdf</div>").hide()[0];
            $(carr).parent().after(carr.infoText);
            parts.find("a").hover(function ()
            {
                var text = $(this).attr("title");
                if (text)
                {
                    $(carr.infoText).text(text).show();
                }
            }, function ()
            {
                $(carr.infoText).text("").hide();
            });
            $(this).carrousel(
            {
                rotateOnClick: false
            });
        });
        return this;
    };
})(jQuery);
$.fn.flyHigh = function (options)
{
    var conf = $.extend(
    {
        altitude: 25,
        stopAfter: false
    }, options);
    if (!this.length)
    {
        return this;
    }
    $(this).each(function ()
    {
        var remaining = conf.stopAfter ? parseInt(conf.stopAfter) : false;
        $($.merge([this], $.makeArray($(this).parents()))).each(function ()
        {
            if (remaining || remaining === false)
            {
                var zi = (parseInt($(this).css("z-index")) || 0) + conf.altitude;
                $(this).css("z-index", zi < 0 ? "0" : zi);
                remaining = remaining ? remaining - 1 : false;
            }
        });
    });
    return this;
};
(function ($)
{
    $.fn.productTooltip = function (options)
    {
        var conf = $.extend(
        {}, options);
        if (!this.length)
        {
            return this;
        }
        $(this).each(function ()
        {
            if (this.hasPTooltip)
            {
                return this;
            }
            this.hasPTooltip = true;
            var tt = this;
            $(tt).hide();
            $(tt).wrapInner("<span class='tool-text'/>");
            $(tt).prepend("<span class='title'>" + $(tt).prev().text() + "</span>");
            $(tt).prev().hover(function ()
            {
                $(tt).flyHigh(
                {
                    altitude: 5,
                    stopAfter: 5
                }).show();
            }, function ()
            {
                $(tt).flyHigh(
                {
                    altitude: -5,
                    stopAfter: 5
                }).hide();
            });
        });
        return $(this);
    };
})(jQuery);
(function ($)
{
    $.fn.styleDrop = function (options)
    {
        var conf = $.extend(
        {
            dropButtonWidh: 20,
            zIndexAdd: 25,
            containerBorder: 1,
            fadeInOnLoad: true,
            ctrl: false,
            wrapSpace: null,
            allSelectedText: "All",
            nrSelectedText: "## Selected",
            multipleColWidth: 165,
            maxDropHeight: 11,
            scrollbarWidth: 16,
            maxDropSimpleHeight: 120,
            wheelSpeed: 18,
            scrollbarMargin: 1
        }, options);
        if (!this.length)
        {
            return this;
        }
        if (conf.ctrl)
        {
            $(this).each(function ()
            {
                if (!this.styleDrop)
                {
                    return;
                }
                switch (conf.ctrl)
                {
                    case "reset":
                        this.styleDrop.reset();
                        break;
                    default:
                        break;
                }
            });
            return this;
        }
        var drops = [];
        var closeAllDrops = function ()
        {
            $(drops).each(function ()
            {
                this.close();
            });
        };
        $("body").click(function (e)
        {
            if ($(e.target).is("input[type=checkbox], label.checkbox, .jScrollPaneTrack, .jScrollPaneDrag, .jScrollPaneDragTop, .jScrollPaneDragBottom, .jScrollArrowUp, .jScrollArrowDown"))
            {
                return;
            }
            closeAllDrops();
        });
        var dropObj = function (elem, multiple)
        {
            this.title = $("<div class='style-drop-title'/>")[0];
            this.container = $("<div class='style-drop-container-inner'/>")[0];
            this.wrapper = $("<div class='style-drop " + (multiple ? "style-drop-multiple" : "style-drop-simple") + "'/>")[0];
            this.beforeOpenValue = "";
            this.formPart = elem;
            //$(elem).css("position", "absolute").css("left", "-9999px");
            if (!multiple && false)
            {
                $(elem).focus(function (e)
                {
                    $(this.styleDrop.wrapper).addClass("style-drop-focus");
                }).blur(function (e)
                {
                    $(this.styleDrop.wrapper).removeClass("style-drop-focus");
                }).keypress(function (e)
                {
                    if (e.which == 32)
                    {
                        this.styleDrop.toggle(true);
                    }
                    else
                    {
                        switch (e.keyCode)
                        {
                            case 38:
                                $(".highlight", this.container).each(function ()
                                {
                                    if ($(this).prev().length)
                                    {
                                        $(this).removeClass("highlight").prev().addClass("highlight").each(function ()
                                        {
                                            $(elem).val($(this.partner).attr("value")).change();
                                        });
                                    }
                                });
                                e.preventDefault();
                                e.stopPropagation();
                                break;
                            case 40:
                                $(".highlight", this.container).each(function ()
                                {
                                    if ($(this).next().length)
                                    {
                                        $(this).removeClass("highlight").next().addClass("highlight").each(function ()
                                        {
                                            $(elem).val($(this.partner).attr("value")).change();
                                        });
                                    }
                                });
                                e.preventDefault();
                                e.stopPropagation();
                                break;
                        }
                        this.styleDrop.updateTitle();
                    }
                });
            }
            $(this.wrapper).append(this.title).append(this.container);
            $(multiple ? elem[0] : elem).before(this.wrapper);
            $(this.container).wrap("<div class='style-drop-container'/>");
            this.open = function ()
            {
                closeAllDrops();
                this.beforeOpen();
                if (!multiple)
                {
                    $(elem).focus();
                }
                $(this.wrapper).addClass("style-drop-open");
                $(this.container).parent().show().parents().each(function ()
                {
                    $(this).css("z-index", (parseInt($(this).css("z-index")) || 0) + conf.zIndexAdd);
                });
                if (conf.wrapSpace)
                {
                    var containerPrefs = $.extend($(this.container).offset(),
                    {
                        width: $(this.container).width()
                    });
                    var wrapSpacePrefs = $.extend($(conf.wrapSpace).offset(),
                    {
                        width: $(conf.wrapSpace).width()
                    });
                    if (containerPrefs.left + containerPrefs.width > wrapSpacePrefs.left + wrapSpacePrefs.width)
                    {
                        $(this.container).parent().addClass("style-drop-container-right");
                    }
                }
            };
            this.close = function (needFocus)
            {
                if (!multiple && needFocus)
                {
                    $(elem).focus();
                }
                $(this.wrapper).removeClass("style-drop-open");
                $(this.container).parent().hide().parents().each(function ()
                {
                    var zi = (parseInt($(this).css("z-index")) || 0) - conf.zIndexAdd;
                    $(this).css("z-index", zi < 0 ? "0" : zi);
                });
                $(this.container).parent().removeClass("style-drop-container-right");
            };
            this.toggle = function (needFocus)
            {
                if ($(this.wrapper).hasClass("style-drop-open"))
                {
                    this.close(needFocus);
                }
                else
                {
                    this.open(needFocus);
                }
                return this;
            };
            this.updateTitle = function ()
            {};
            this.beforeOpen = function ()
            {};
            this.cancel = function ()
            {};
            this.reset = function ()
            {};
        };
        $(this).each(function ()
        {
            var sd = "";
            var origFormPart = $(this).find("select");
            if (origFormPart.length)
            {
                origFormPart = origFormPart[0];
                if (origFormPart.styleDrop)
                {
                    return this;
                }
                sd = new dropObj(origFormPart);
                var fp = origFormPart;
                fp.styleDrop = sd;
                $("option", fp).each(function ()
                {
                    var htmlFace = $("<a href='#'>" + $(this).text() + "</a>").click(function (e)
                    {
                        e.preventDefault();
                        e.stopPropagation();
                        $(fp).val($(this.partner).attr("value")).change();
                        fp.styleDrop.updateTitle().close();
                    }).mousemove(function ()
                    {
                        $(".highlight", fp.styleDrop.container).removeClass("highlight");
                        $(this).addClass("highlight");
                    })[0];
                    this.partner = htmlFace;
                    htmlFace.partner = this;
                    $(fp.styleDrop.container).append(htmlFace);
                });
                $(sd.title).click(function (e)
                {
                    e.stopPropagation();
                    sd.toggle(true);
                });
                sd.updateTitle = function ()
                {
                    $(sd.title).text($(":selected", fp).text());
                    return sd;
                };
                sd.reset = function ()
                {
                    $(sd.formPart).val($(sd.formPart).children(":first").val());
                    sd.updateTitle();
                    return sd;
                };
                var widthOffset = parseInt($(sd.title).css("left") || $(sd.title).css("right") || 0);
                var availableSpace = $(sd.wrapper).outerWidth() + widthOffset - conf.dropButtonWidh;
                if (availableSpace > $(sd.container).outerWidth())
                {
                    var missingGap = availableSpace - $(sd.container).outerWidth();
                    $(sd.container).width(missingGap + $(sd.container).width());
                }
                if ($.fn.jScrollPane && $(sd.container).height() > conf.maxDropSimpleHeight)
                {
                    $(sd.container).height(conf.maxDropSimpleHeight).width(($.browser.msieLTE7 ? $(sd.container).outerWidth() + 1 : $(sd.container).width()) + conf.scrollbarWidth).wrapInner("<div class='wrap-hide' style='height:" + conf.maxDropSimpleHeight + "px;'></div>").children().jScrollPane(
                    {
                        showArrows: true,
                        scrollbarWidth: conf.scrollbarWidth,
                        wheelSpeed: conf.wheelSpeed,
                        scrollbarMargin: conf.scrollbarMargin,
                        dragMinHeight: 45,
                        dragMaxHeight: 45
                    });
                }
            }
            origFormPart = $(this).find("input[type=checkbox]");
            if (origFormPart.length)
            {
                if (origFormPart[0].styleDrop)
                {
                    return this;
                }
                sd = new dropObj(origFormPart, true);
                var dropLabel = $(".drop-label", this);
                var l10nTitle = dropLabel.attr("title");
                l10nTitle = l10nTitle ? eval("(" + l10nTitle + ")") : "";
                dropLabel.removeAttr("title");
                if (!l10nTitle || !l10nTitle.all || !l10nTitle.more)
                {
                    l10nTitle = {
                        all: conf.allSelectedText,
                        more: conf.nrSelectedText
                    };
                }
                var actLabelSet = [];
                var labelSets = [];
                var labels = $("label", this).click(function (e)
                {
                    sd.updateTitle();
                }).each(function ()
                {
                    this.partner = $("#" + $(this).attr("for"))[0] || "";
                    this.partner.partner = this;
                    $(this).append(this.partner);
                    this.update = function ()
                    {
                        if (this.partner.checked)
                        {
                            $(this).addClass("checked");
                        }
                        else
                        {
                            $(this).removeClass("checked");
                        }
                    };
                    this.update();
                    if ($.browser.msie)
                    {
                        $(this.partner).click(function (e)
                        {
                            $(this).blur().focus().change();
                            this.partner.update();
                        });
                    }
                    else
                    {
                        $(this.partner).change(function ()
                        {
                            this.partner.update();
                        });
                    }
                    this.setChecked = function (state)
                    {
                        this.partner.checked = state ? true : false;
                        this.update();
                    };
                    actLabelSet.push(this);
                    if (actLabelSet.length == conf.maxDropHeight)
                    {
                        labelSets.push(actLabelSet);
                        actLabelSet = [];
                    }
                });
                if (actLabelSet.length)
                {
                    labelSets.push(actLabelSet);
                }
                $(labelSets).each(function ()
                {
                    var set = $("<div class='check-set' style='width:" + conf.multipleColWidth + "px'/>")[0];
                    $(sd.container).append(set);
                    $(set).append(this);
                });
                $(sd.container).width(conf.multipleColWidth * labelSets.length);
                if ($.browser.msieLTE7)
                {
                    $(sd.container).width(($(sd.container).outerWidth() - $(sd.container).width()) + $(sd.container).outerWidth());
                }
                $(".style-drop-controls", this).wrapInner("<div class='style-drop-controls-inner'>").insertAfter(sd.container).find("a").click(function (e)
                {
                    e.preventDefault();
                    e.stopPropagation();
                    if ($(this).hasClass("close"))
                    {
                        sd.close();
                    }
                    if ($(this).hasClass("cancel"))
                    {
                        sd.cancel();
                    }
                });
                sd.beforeOpen = function ()
                {
                    sd.beforeOpenValue = [];
                    $(labels).each(function ()
                    {
                        if (this.partner.checked)
                        {
                            sd.beforeOpenValue.push(this);
                        }
                    });
                };
                sd.cancel = function ()
                {
                    $(labels).each(function ()
                    {
                        this.setChecked(false);
                    });
                    $(sd.beforeOpenValue).each(function ()
                    {
                        this.setChecked(true);
                    });
                    sd.close();
                    sd.updateTitle();
                };
                $(sd.title).click(function (e)
                {
                    e.stopPropagation();
                    sd.toggle();
                });
                sd.updateTitle = function ()
                {
                    var selected = [];
                    origFormPart.each(function ()
                    {
                        this.checked ? selected.push(this) : "";
                    });
                    if (selected.length == 1)
                    {
                        $(sd.title).text($(selected[0].partner).text());
                    }
                    else
                    {
                        if (!selected.length || selected.length == origFormPart.length)
                        {
                            $(sd.title).text(l10nTitle.all);
                        }
                        else
                        {
                            $(sd.title).text((l10nTitle.more + "").replace(/##/, selected.length));
                        }
                    }
                    return sd;
                };
                sd.reset = function ()
                {
                    $(labels).each(function ()
                    {
                        this.setChecked(false);
                    });
                    sd.updateTitle();
                    return sd;
                };
            }
            if (sd)
            {
                drops.push(sd);
                sd.updateTitle();
                sd.close();
                this.styleDrop = sd;
            }
        });
        return $(this);
    };
})(jQuery);
(function ($)
{
    $.fn.fieldtag = function (options)
    {
        var opt = $.extend(
        {
            markedClass: "tagged",
            standardText: false
        }, options);
        var taggedInput = this;
        $(this).focus(function ()
        {
            if (!taggedInput.changed)
            {
                taggedInput.clear();
            }
        }).blur(function ()
        {
            if (!taggedInput.changed && $(taggedInput).val() != $(taggedInput).attr("title"))
            {
                taggedInput.changeMark();
            }
            if (!taggedInput.changed)
            {
                taggedInput.addTag();
            }
        }).keyup(function ()
        {
            taggedInput.changeMark();
        }).each(function ()
        {
            taggedInput.title = $(taggedInput).attr("title");
            if ($(taggedInput).val() == $(taggedInput).attr("title"))
            {
                taggedInput.changed = false;
            }
            taggedInput.clear = function ()
            {
                if (!taggedInput.changed)
                {
                    $(taggedInput).val("").removeClass(opt.markedClass);
                }
            };
            taggedInput.addTag = function ()
            {
                $(taggedInput).val(opt.standardText === false ? taggedInput.title : opt.standardText).addClass(opt.markedClass);
            };
            taggedInput.changeMark = function ()
            {
                taggedInput.changed = ($(taggedInput).val() ? true : false);

            };
            if (taggedInput.form)
            {
                taggedInput.form.tagFieldsToClear = taggedInput.form.tagFieldsToClear || [];
                taggedInput.form.tagFieldsToClear.push(taggedInput);
                if (taggedInput.form.tagFieldsAreCleared)
                {
                    return true;
                }
                taggedInput.form.tagFieldsAreCleared = true;
                $(taggedInput.form).submit(function ()
                {
                    $(taggedInput.tagFieldsToClear).each(function ()
                    {
                        taggedInput.clear();
                    });
                });
            }
            $(taggedInput).bind("propertychange", function (e)
            {
                if (!taggedInput.changed && $(taggedInput).val() != $(taggedInput).attr("title"))
                {
                    taggedInput.changeMark();
                }
            });
        }).keyup().blur();
        return $(this);
    };
})(jQuery);
(function ($)
{
    $.fn.styleInput = function (options)
    {
        var conf = $.extend(
        {
            textEnableFieldtag: true,
            textMarkedClass: "tagged",
            textStandardText: false
        }, options);
        $(this).each(function ()
        {
            if (this.isStyleInput)
            {
                return this;
            }
            var wrapElement = function (elem, wrapOptions)
            {
                var wrapConf = $.extend(
                {
                    cssClass: "",
                    type: ""
                }, wrapOptions);
                var hoverClass = (wrapConf.cssClass ? wrapConf.cssClass.split(" ")[0] + "-" : "") + "hover";
                if ((wrapConf.type === "button") && (($.browser.mozilla && (parseFloat($.browser.version) < 1.9)) || ($.browser.msie && (parseInt($.browser.version)))))
                {
                    $(elem).wrap("<div style='float:left;' />").parent().wrap("<div class='style-input " + wrapConf.cssClass + "' />");
                }
                else
                {
                    $(elem).wrap("<div />").parent().wrap("<div class='style-input " + wrapConf.cssClass + "' />");
                }
                $(elem).parent().parent().hover(function ()
                {
                    $(this).addClass(hoverClass);
                }, function ()
                {
                    $(this).removeClass(hoverClass);
                });
                return $(elem);
            };
            switch ($(this).attr("type"))
            {
                case "text":
                    if (!$(this).is("input"))
                    {
                        return this;
                    }
                    if ($.fn.fieldtag && conf.textEnableFieldtag)
                    {
                        $(this).fieldtag(
                        {
                            markedClass: conf.textMarkedClass,
                            standardText: conf.textStandardText
                        });
                    }
                    wrapElement(this,
                    {
                        cssClass: "style-input-text"
                    });
                    break;
                case "button":
                case "submit":
                    if (!$(this).is("input") && !$(this).is("button"))
                    {
                        return this;
                    }
                    var cssClasses = ["style-input-submit"];
                    if ($(this).hasClass("back"))
                    {
                        cssClasses.push("style-input-back");
                    }
                    if ($(this).hasClass("next"))
                    {
                        cssClasses.push("style-input-next");
                    }
                    wrapElement(this,
                    {
                        cssClass: cssClasses.join(" "),
                        type: "button"
                    });
                    break;
                case "checkbox":
                    if (!$(this).is("input"))
                    {
                        return this;
                    }
                    var chbx = this;
                    chbx.styleInputLabel = $(this).parents("label")[0] || $("<label/>")[0];
                    chbx.styleInputLabel.styleInputChbx = chbx;
                    wrapElement(chbx.styleInputLabel,
                    {
                        cssClass: "style-input-checkbox"
                    });
                    chbx.styleInputUpdateLabel = function ()
                    {
                        if (this.checked)
                        {
                            $(this.styleInputLabel).addClass("style-input-checked");
                        }
                        else
                        {
                            $(this.styleInputLabel).removeClass("style-input-checked");
                        }
                    };
                    $(chbx).change(function ()
                    {
                        this.styleInputUpdateLabel();
                    }).click(function ()
                    {
                        this.styleInputUpdateLabel();
                    }).focus(function ()
                    {
                        $(this.styleInputLabel).addClass("style-input-focus");
                    }).blur(function ()
                    {
                        $(this.styleInputLabel).removeClass("style-input-focus");
                    }).each(function ()
                    {
                        this.styleInputUpdateLabel();
                    });
                    break;
                case "radio":
                    if (!$(this).is("input"))
                    {
                        return this;
                    }
                    var radioGroup = $("input[name=" + $(this).attr("name") + "]");
                    var updateLabels = function ()
                    {
                        $(radioGroup).each(function ()
                        {
                            if (this.checked)
                            {
                                $(this.styleInputLabel).addClass("style-input-checked");
                            }
                            else
                            {
                                $(this.styleInputLabel).removeClass("style-input-checked");
                            }
                        });
                    };
                    radioGroup.each(function ()
                    {
                        var rdio = this;
                        rdio.styleInputLabel = $(this).parents("label")[0] || $("<label/>")[0];
                        rdio.styleInputLabel.styleInputRadio = rdio;
                        wrapElement(rdio.styleInputLabel,
                        {
                            cssClass: "style-input-radio"
                        });
                        rdio.styleInputGroup = radioGroup;
                        $(rdio).change(updateLabels).click(updateLabels).focus(function ()
                        {
                            $(this.label).addClass("style-input-focus");
                        }).blur(function ()
                        {
                            $(this.label).removeClass("style-input-focus");
                        });
                        this.isStyleInput = true;
                    });
                    updateLabels();
                    break;
                default:
                    if (!$(this).is("textarea"))
                    {
                        return this;
                    }
                    wrapElement(this,
                    {
                        cssClass: "style-input-textarea"
                    });
                    if ($.browser.msieLTE7)
                    {
                        $(this).width($(this).width());
                    }
                    break;
            }
            this.isStyleInput = true;
        });
        return $(this);
    };
})(jQuery);
$.fn.syncHeightPerLine = function (options)
{
    var conf = $.extend(
    {
        syncDescendant: false,
        resetHeight: false
    }, options);
    var syncList = $(this);
    if (!syncList.length)
    {
        return syncList;
    }
    var toSync = [];
    if (conf.resetHeight)
    {
        syncList.each(function (i, val)
        {
            $(conf.syncDescendant ? $(this).find(conf.syncDescendant) : this).css("height", "auto");
        });
    }
    syncList.each(function (i, val)
    {
        $(conf.syncDescendant ? $(this).find(conf.syncDescendant) : this).each(function ()
        {
            toSync.push(this);
        });
        if (($(this).next().length && $(this).position().top != $(this).next().position().top) || !$(this).next().length)
        {
            $(toSync).height($(toSync).maxHeight());
            toSync = [];
        }
    });
    return this;
};
$.fn.maxHeight = function ()
{
    var max = 0;
    $(this).each(function ()
    {
        var height = $.browser.msie && $.browser.version == 6 ? $(this).outerHeight() : $(this).height();
        max = height > max ? height : max;
    });
    return max;
};
jQuery.fn.supersleight = function (settings)
{
    settings = jQuery.extend(
    {
        imgs: true,
        backgrounds: true,
        shim: "/fileadmin/templates/theme/images/blank.gif",
        apply_positioning: true
    }, settings);
    return this.each(function ()
    {
        if (jQuery.browser.msie && parseInt(jQuery.browser.version, 10) < 7 && parseInt(jQuery.browser.version, 10) > 4)
        {
            jQuery(this).find("*").andSelf().each(function (i, obj)
            {
                var self = jQuery(obj);
                if (settings.backgrounds && self.css("background-image").match(/\.png/i) !== null)
                {
                    var bg = self.css("background-image");
                    var src = bg.substring(5, bg.length - 2);
                    var mode = (self.css("background-repeat") == "no-repeat" ? "crop" : "scale");
                    var styles = {
                        "filter": "progid:DXImageTransform.Microsoft.AlphaImageLoader(src='" + src + "', sizingMethod='" + mode + "')",
                        "background-image": "url(" + settings.shim + ")"
                    };
                    self.css(styles);
                }
                if (settings.imgs && self.is("img[src$=png]"))
                {
                    var styles = {
                        "width": self.width() + "px",
                        "height": self.height() + "px",
                        "filter": "progid:DXImageTransform.Microsoft.AlphaImageLoader(src='" + self.attr("src") + "', sizingMethod='scale')"
                    };
                    self.css(styles).attr("src", settings.shim);
                }
                if (settings.apply_positioning && self.is("a, input") && (self.css("position") === "" || self.css("position") == "static"))
                {
                    self.css("position", "relative");
                }
            });
        }
    });
};
$.fn.supersleightload = function ()
{
    return $(this).each(function ()
    {
        $(this).load(function ()
        {
            if (this.supersleightLoaded)
            {
                return this;
            }
            $(this).supersleight();
            this.supersleightLoaded = true;
        }).attr("src", $(this).attr("src"));
    });
};

function locate_me_center_on_map(country)
{
    var geocoder = new GClientGeocoder();
    geocoder.getLocations(country, function (locations)
    {
        var north = locations.Placemark[0].ExtendedData.LatLonBox.north;
        var south = locations.Placemark[0].ExtendedData.LatLonBox.south;
        var east = locations.Placemark[0].ExtendedData.LatLonBox.east;
        var west = locations.Placemark[0].ExtendedData.LatLonBox.west;
        var bounds = new GLatLngBounds(new GLatLng(south, west), new GLatLng(north, east));
        map.setCenter(bounds.getCenter(), map.getBoundsZoomLevel(bounds));
    });
}
$(function ()
{
    if (($(".showroom").length > 0) && ($("#product-gallery.showroom").length === 0))
    {
        $("#meta-nav li a").each(function ()
        {
            $(this).css("color", "#c9c9c9");
        });
    }
    if ($("#pp-subnav").length > 0)
    {
        $(".showroom").css("backgroundColor", "#000");
        $(".showroom img").hide().fadeIn(1500);
    }
    if ($.browser.msieLTE7)
    {
        $(".diagonal").supersleight().addClass("diagonal-loaded");
        $("#product-detail").prepend("<div class='ie6pngfix'></div>");
        $("#product-detail .ie6pngfix").css("visibility", "visible").supersleight();
        $("#slider-gallery li span").css("visibility", "visible").supersleight(
        {
            "apply_positioning": false
        });
        $("#watch-carrousel, div.watch-carrousel").css("visibility", "visible");
        $(["#product-gallery .product-gallery-part:first img", ".variants-carrousel li a img", "#watch-carrousel, div.watch-carrousel img:first"].join(", ")).supersleight();
        $("#product-gallery .product-gallery-part img").css("visibility", "visible").supersleightload();
        $("#finder-reset").hide().show();
        $("#spirit-history-content.news-all .related-reference").hoverClass();
        $("#standard-content.faq .container .question-link.faq-toggler").hoverClass();
        $("#standard-content.faq .container .question-link.faq-toggler.active").hoverClass();
        $("#main-content .line").css("zoom", "1");
    }
    if ($.browser.safari)
    {
        $("#product-hub").not(".subhub").find(".cross-reference").css("display", "inline-block");
    }
    if ($.browser.msie && (parseInt($.browser.version) == 7 || parseInt($.browser.version) == 8))
    {
        $("#main-content .progress li, #main-content .progress li").css(
        {
            overflow: "hidden"
        }).each(function ()
        {
            var middle = $(this).height() / 2;
            var width = $(this).width();
            $("a,strong", this).each(function ()
            {
                $("span", this).css("display", "block").css("height", "auto");
                $(this).css(
                {
                    width: width
                });
                $("span", this).css(
                {
                    position: "relative",
                    top: Math.round(middle - $(this).height() / 2) + "px"
                });
            });
        });
    }
    $(".switch-panel").each(function ()
    {
        $(this).switchPanel(
        {
            hoverElement: function (panel)
            {
                return $(panel).parent().parent();
            }
        });
    });
    $(".rating-cancel").hide();
    $(".detail-gallery-carrousel").detailGallery(
    {
        showroom: $("#product-gallery")
    });
    $(".variants-carrousel").variantCarrousel();
    $("#spirit-history-content.hub .multi-column").not(".no-sync").syncHeightPerLine(
    {
        syncDescendant: "div"
    });
    $("#product-hub.collection .list>li").syncHeightPerLine(
    {
        syncDescendant: "h2"
    });
    if ($(".postcode-part").height() > $(".city-part"))
    {
        $(".city-part").css("padding-top", "13px");
    }
    if ($.browser.msieLTE7)
    {
        $("#product-hub.collection .list>li").syncHeightPerLine();
    }
    $(".favorites .fav-list>li").syncHeightPerLine(
    {
        syncDescendant: "h2"
    }).syncHeightPerLine(
    {
        syncDescendant: ".name"
    });
    $(".vintage-watches .fav-list>li").syncHeightPerLine(
    {
        syncDescendant: "h2"
    }).syncHeightPerLine(
    {
        syncDescendant: ".name"
    });
    if ($.browser.msieLTE7)
    {
        $(".vintage-watches .fav-list>li .hub-thumb img").load(function ()
        {
            $(this).css(
            {
                "margin-top": Math.round(($(this).parent().height() - $(this).height()) / 2) + "px"
            });
        }).load();
    }
    $(".collection-hub #t3_teaser>li").syncHeightPerLine(
    {
        syncDescendant: ".subtitle"
    }).syncHeightPerLine(
    {
        syncDescendant: "h2"
    });
    $("#product-subhub .list>li").syncHeightPerLine(
    {
        syncDescendant: ".subtitle"
    }).syncHeightPerLine(
    {
        syncDescendant: "h2"
    });
    $(".tooltip-list .tooltip").productTooltip();
    var wrapSpace = $("#standard-content .container");
    $(".omega-forms-dropdown").styleDrop(wrapSpace.length ? {
        wrapSpace: wrapSpace[0]
    } : {});
    $("#finder-reset").click(function (e)
    {
        e.preventDefault();
        $("#watchfinder-form .omega-forms-dropdown").styleDrop(
        {
            ctrl: "reset"
        });
    });
    $(".form-line input, .form-line button, .form-line textarea").styleInput();
    var detailAccs = $(".detail-accordion");
    if (detailAccs.length)
    {
        var detailDescMaxHeight = 162;
        $(detailAccs).prevAll().each(function ()
        {
            detailDescMaxHeight -= (parseInt($(this).outerHeight(true)) || 0);
        });
        $("dd", detailAccs).each(function ()
        {
            if ($(this).height() > detailDescMaxHeight)
            {
                $(this).height(detailDescMaxHeight).wrapInner("<div class='wrap-hide' style='height:" + detailDescMaxHeight + "px;'></div>").children().jScrollPane(
                {
                    showArrows: true,
                    scrollbarWidth: 15,
                    scrollbarMargin: 1,
                    dragMinHeight: 45,
                    dragMaxHeight: 45
                });
            }
        });
        $(".detail-accordion").accordion(
        {
            autoHeight: false,
            animated: $.browser.msieLTE8 || $.browser.msie8 ? false : "slide"
        });
    }
    $(".longtext-scroll").jScrollPane(
    {
        showArrows: true,
        scrollbarWidth: 15,
        scrollbarMargin: 20,
        dragMinHeight: 45,
        dragMaxHeight: 45
    });
    $(".attention-hint").append("<span class='sign'>&nbsp;</span>");
    var contentExpander = $(".content-expander");
    if (contentExpander.length)
    {
        contentExpander.expander(
        {
            termSelector: ".term h4",
            animate: !$.browser.msieLTE8
        });
        $(".content-expander>li").addClass("expander-li");
    }
    var updateShippingAddressForm = function (elem, animate)
    {
        if (elem && elem.checked)
        {
            if (animate)
            {
                $("#shipping-address-part").fadeOut("fast");
            }
            else
            {
                $("#shipping-address-part").hide();
            }
        }
        else
        {
            if (animate)
            {
                $("#shipping-address-part").fadeIn("fast");
            }
            else
            {
                $("#shipping-address-part").show();
            }
        }
    };
    $("#no-shipping-address").click(function ()
    {
        if (!$.browser.msieLTE7)
        {
            updateShippingAddressForm(this, true);
        }
    }).click(function ()
    {
        if ($.browser.msieLTE7)
        {
            updateShippingAddressForm(this);
        }
    }).each(function ()
    {
        updateShippingAddressForm(this);
    });
    var metaContainer = $("#meta-wrapper").each(function ()
    {
        var container = this;
        var content = $("#wrapper");
        container.mc = {
            toggle: function (id)
            {
                if (id && id != container.mc.lastId)
                {
                    container.mc.close(id);
                    return true;
                }
                else
                {
                    container.mc.close();
                    return false;
                }
            },
            open: function (id)
            {
                $(".meta-part", container).hide();
                $(id, container).show();
                var height = $(container).outerHeight();
                $(container).css("top", "-" + height + "px");
                content.animate(
                {
                    marginTop: height + "px"
                }, "fast");
                $(container).animate(
                {
                    top: "0px"
                }, "fast", function ()
                {
                    container.mc.lastId = id;
                });
            },
            close: function (id)
            {
                var height = $(container).outerHeight();
                container.mc.lastId = id;
                content.animate(
                {
                    marginTop: "0px"
                }, "fast");
                $(container).animate(
                {
                    top: "-" + height + "px"
                }, "fast", function ()
                {
                    if (id)
                    {
                        container.mc.open(id);
                    }
                });
            },
            lastId: ""
        };
    });
    var metaScrollIns = $("#meta-nav .scroll-in");
    metaScrollIns.click(function (e)
    {
        e.preventDefault();
        var lnk = this;
        var id = $(this).attr("href") || "";
        metaContainer.each(function ()
        {
            if (this.mc.toggle(id))
            {
                metaScrollIns.each(function ()
                {
                    $(this).parent().removeClass("active");
                });
                $(lnk).parent().addClass("active");
            }
            else
            {
                $(lnk).parent().removeClass("active");
            }
        });
    });
    $("#meta-nav li").hoverClass();
    $("#meta-wrapper .close-meta").click(function (e)
    {
        e.preventDefault();
        $("#meta-nav .scroll-in").removeClass("active");
        metaContainer.each(function ()
        {
            this.mc.close();
            metaScrollIns.each(function ()
            {
                $(this).parent().removeClass("active");
            });
        });
    });
    if ($.browser.touch)
    {
        $("#main-nav .level-0>li").click(function (e)
        {
            if ($(this).hasClass("hover"))
            {
                window.location.href = $("a:first", this).attr("href");
            }
            else
            {
                $(this).addClass("hover");
            }
            return true;
        });
        $("#main-nav .level-0>li > a").click(function (e)
        {
            if (!$(this).parent().hasClass("hover"))
            {
                e.preventDefault();
            }
            return true;
        });
        $("body").bind("touchend", function (e)
        {
            var $target = $(e.target);
            var $parent = $target.parent();
            var $gparent = $parent.parent();
            var subColLink = $target.is("a") && $parent.is("li") && !$gparent.hasClass("level-0");
            var selectedColLi = $target.is("li") && $target.hasClass("hover") && $parent.hasClass("level-0");
            var selectedColLink = $target.is("a") && $parent.is("li") && $parent.hasClass("hover") && $gparent.hasClass("level-0");
            if (!subColLink && !selectedColLi && !selectedColLink)
            {
                $("#main-nav .level-0>li").removeClass("hover");
            }
            return true;
        });
    }
    else
    {
        $("#main-nav .level-0>li, #main-nav>ul>li>ul>li").hoverClass();
        $("#main-nav .level-0>li").click(function ()
        {
            window.location = $("a:first", this).attr("href");
        }).css("cursor", "pointer");
    }
    $("#main-sub-nav li").hoverClass();
    $(".form-line-error .style-input-textarea").parents(".form-line-error").each(function ()
    {
        var bgimage = $(this).css("background-image");
        $(this).css("background-image", "none").append("<span style='background-image:" + bgimage + "' class='exclamation'>&nbsp</span>");
    });
    if ($.fn.fancybox)
    {
        $("a.fancy-image, .image-list a, #slider-gallery li a").fancybox(
        {
            frameWidth: 540,
            frameHeight: 670,
            centerOnScroll: false,
            showCloseButton: false,
            hideOnContentClick: false,
            autoDimensions: true,
            overlayShow: true,
            callbackOnStart: function (elem)
            {
                $(".fancy_bg").hide();
            },
            callbackOnShow: function (elem)
            {
                $("#fancy_title").hide();
                $(".modal-dialog-close, .modal-dialog-prev, .modal-dialog-next").unbind("click").bind("click", function (e)
                {
                    e.preventDefault();
                });
                $(".modal-dialog-close").bind("click", function (e)
                {
                    $.fn.fancybox.close();
                });
                if ($("#fancy_left").is(":visible"))
                {
                    $(".modal-dialog-prev").bind("click", function (e)
                    {
                        $("#fancy_left").trigger("click");
                    });
                }
                if ($("#fancy_right").is(":visible"))
                {
                    $(".modal-dialog-next").bind("click", function (e)
                    {
                        $("#fancy_right").trigger("click");
                    });
                }
                $("#fancy_left, #fancy_right").hide();
                if ($.browser.msieLTE7 && $("#fancy_outer").outerHeight() - $("#fancy_content").height() - 20 < 0)
                {
                    $("#fancy_outer").height($("#fancy_outer").outerHeight() + (($("#fancy_outer").height() - $("#fancy_content").height() - 20)) * -1);
                }
                else
                {
                    if (parseInt($("#fancy_outer .modal-dialog-container").height()) + 40 > $("#fancy_outer").height())
                    {
                        $("#fancy_outer").animate(
                        {
                            height: parseInt($("#fancy_outer .modal-dialog-container").height()) + ($.browser.msieLTE7 ? 35 : 40)
                        });
                    }
                }
            }
        });
        $("#locate-me-button").fancybox(
        {
            href: "#locate-me-dialog",
            width: 320,
            height: 100,
            autoDimensions: false,
            overlayShow: true,
            showCloseButton: false,
            hideOnOverlayClick: true,
            padding: 0,
            onStart: function (elem)
            {
                $("#country_choose_panel").css("opacity", "0").hide();
                $("#choose_a_country_select").val(0);
                $("#locate_no").bind("click", function (e)
                {
                    $("#fancybox-content").animate(
                    {
                        height: 136
                    }, 400, function ()
                    {
                        $("#fancybox-content > div").height($(this).height() + 36);
                        $("#country_choose_panel").show().animate(
                        {
                            opacity: "100"
                        }, 1500);
                    });
                    $("#choose_a_country_select").unbind("change").change(function (e)
                    {
                        country = $(this).find("option:selected").text();
                        locate_me_center_on_map(country);
                        $.fancybox.close();
                    });
                });
                $("#fancy-close").bind("click", function (e)
                {
                    $.fancybox.close();
                });
                $("#locate_yes").bind("click", function (e)
                {
                    locate_me_center_on_map($("#located_country").text());
                    $.fancybox.close();
                });
            },
            onCleanup: function ()
            {
                $("#country_choose_panel").css("opacity", "0").hide();
            }
        });
        $(".vintage-search-results .fav-list .hub-thumb").fancybox(
        {
            frameWidth: 550,
            frameHeight: 550,
            centerOnScroll: false,
            showCloseButton: false,
            hideOnContentClick: false,
            autoDimensions: true,
            overlayShow: true,
            callbackOnStart: function (elem)
            {
                $(".fancy_bg").hide();
            },
            callbackOnShow: function (elem)
            {
                $("#fancy_title").hide();
                $(".modal-dialog-close, .modal-dialog-prev, .modal-dialog-next").unbind("click").bind("click", function (e)
                {
                    e.preventDefault();
                });
                $("#fancy_content img").load(function ()
                {
                    $(this).css(
                    {
                        "margin-top": Math.round(($(this).parent().height() - $(this).height()) / 2) + "px"
                    });
                }).load();
                $(".modal-dialog-close").bind("click", function (e)
                {
                    $.fn.fancybox.close();
                });
            }
        });
    }
    $(".thumb-wide, .thumb-full, .thumb-small").hover(function ()
    {
        $(this).addClass("hover");
    }, function ()
    {
        $(this).removeClass("hover");
    });
    if ($.browser.msie && parseInt($.browser.version) == 7)
    {
        $(".style-drop-controls").each(function ()
        {
            $(this).width($(this).parent().width() - 1).find(".close span").each(function ()
            {
                $(this).css("float", "left");
            });
        });
    }
    var vintageCollabsable = $(".vintage-watches .form-part-collapsable").each(function ()
    {
        $(this).addClass("form-part-collapsable-initialized").hide();
    })[0] || null;
    var vintageMoreButton = $(".vintage-watches .option-link-more").click(function (e)
    {
        e.preventDefault();
        e.stopPropagation();
        $(this).hide();
        $(vintageCollabsable).fadeIn("normal", function ()
        {
            $(this).removeClass("hello-ie6-i-am-hidden");
        });
    })[0] || null;
    var vintageLessButton = $(".vintage-watches .option-link-less").click(function (e)
    {
        e.preventDefault();
        e.stopPropagation();
        $(vintageCollabsable).fadeOut("fast", function ()
        {
            $(vintageMoreButton).show();
            $(this).addClass("hello-ie6-i-am-hidden");
        });
    })[0] || null;
});
$(function ()
{
    $(".faq-toggler").each(function ()
    {
        var toggleElem = $(this).next(".faq-answer");
        var toggleTrigger = $(this);
        $(this).data("faqToggleElement", toggleElem);
        toggleElem.find(".faq-yes").click(function (e)
        {
            e.preventDefault();
            toggleElem.slideUp($.browser.msieLTE7 ? 0 : 400);
            toggleTrigger.removeClass("active");
        });
    }).click(function (e)
    {
        e.preventDefault();
        var faq_id = $(this).attr("id").substr(10);
        toggleFaqElement($(this), faq_id);
    });
    $(".faq-no").click(function ()
    {
        var faq_id = $(this).attr("id").substr(5);
        if (isNaN(faq_id) == true)
        {
            faq_id = faq_id.substr(3);
            $.get("/index.php?eID=calleo_answer_no&id=" + faq_id, function (data)
            {});
            window.location = $(this).attr("href");
        }
        else
        {
            $.get("/index.php?eID=calleo_answer_no&id=" + faq_id, function (data)
            {});
            window.location = $(this).attr("href");
        }
        return false;
    });
});
$(function ()
{
    $("#main-content.magazine .container .image-list span.image-list-link").each(function ()
    {
        $(this).parent().attr("class", $(this).attr("class"));
    });
    $("#standard-content.press-release-hub .list li span.thumb-link").each(function ()
    {
        $(this).parent().attr("class", $(this).attr("class"));
    });
});

function toggleFaqElement(elt, faq_id)
{
    elt.toggleClass("active").data("faqToggleElement").stop(true, true).slideToggle($.browser.msieLTE7 ? 0 : 400);
    $.get("/index.php?eID=calleo_open&id=" + faq_id, function (data)
    {});
}
$(function ()
{
    if (!$(".style-drop-container-inner").socialShare)
    {
        return;
    }
    $(".style-drop-container-inner:first").each(function ()
    {
        $("#wrapper").css(
        {
            "z-index": 30
        });
    });
    var networks = ["facebook", "twitter"];
    if ($(".style-drop").hasClass("cn"))
    {
        networks = ["sina", "kaixin"];
    }
    $(".style-drop-container-inner").socialShare(
    {
        networks: networks,
        append: false,
        caption: $('meta[property="og:title"]').attr("content"),
        description: $('meta[name="description"]').attr("content"),
        picture: $('meta[property="og:image"]').attr("content"),
        via: "omegawatches"
    });
    $(".style-drop").click(function (e)
    {
        e.stopPropagation();
        var self = $(this);
        self.toggleClass("style-drop-open");
        self.find(".style-drop-container").toggle();
        $("#product-gallery").bind("mousedown", function ()
        {
            self.removeClass("style-drop-open");
            self.find(".style-drop-container").hide();
        });
        $("body").click(function ()
        {
            self.removeClass("style-drop-open");
            self.find(".style-drop-container").hide();
        });
    });
    $(".style-drop-container-inner a").hoverClass();
    $(".style-drop a.email").fancybox(
    {
        padding: 10,
        frameWidth: 694,
        frameHeight: 766,
        centerOnScroll: false,
        showCloseButton: false,
        hideOnContentClick: false,
        autoDimensions: false,
        overlayShow: true,
        type: "inline",
        callbackOnShow: function (elem)
        {
            initShareEmail();
            if (!$.browser.msieLTE7)
            {
                return;
            }
            if ($("#fancy_outer").outerHeight() - $("#fancy_content").height() - 20 <= 0)
            {
                $("#fancy_outer").height($("#fancy_outer").outerHeight() + (($("#fancy_outer").height() - $("#fancy_content").height() - 20)) * -1);
            }
        }
    });
});
$(function ()
{
    var maxWidth = $("#main-sub-nav").width();
    var sum = 0;
    $.fn.fixSubMenuNav = function ()
    {
        var moreTopics = $("li#main-sub-nav-more ul");
        if (moreTopics.length == 0)
        {
            return;
        }
        $("ul#main-sub-nav > li:not(#main-sub-nav-more)").each(function ()
        {
            sum += $(this).width();
            if (sum >= maxWidth)
            {
                $(this).appendTo(moreTopics);
            }
        });
        if (sum >= maxWidth)
        {
            $("#main-sub-nav-more").css("display", "block");
            var widthMoreTopic = $("#main-sub-nav-more").width() + "px";
            $("#main-sub-nav-more").css("width", widthMoreTopic);
            $("#main-sub-nav-more ul.last").css("right", widthMoreTopic);
            while ($(this).getSubMenuNavWidth() >= maxWidth)
            {
                $("ul#main-sub-nav > li:last").prev().prependTo(moreTopics);
            }
            moreTopics.select("li:last").addClass("last");
        }
        $("#main-sub-nav").css("overflow", "visible");
    };
    $.fn.getSubMenuNavWidth = function ()
    {
        var sumLi = 0;
        $("ul#main-sub-nav > li").each(function ()
        {
            sumLi += $(this).outerWidth();
        });
        return sumLi;
    };
});
$(document).ready(function ()
{
    var pagerElemSel = [".search-paging span.first", ".search-paging span.last", ".search-paging span.back-link", ".search-paging span.cross-reference"];
    for (var i = 0; i < pagerElemSel.length; i++)
    {
        var pagerElem = $(pagerElemSel[i]);
        pagerElem.parent().attr("class", pagerElem.attr("class"));
        pagerElem.attr("class", "");
    }
    if (window.location.hash.search(/^#faqtoggler\d+$/) !== -1)
    {
        var faq_elt = $(window.location.hash);
        if (faq_elt)
        {
            var faq_id = window.location.hash.replace(/#faqtoggler/, "");
            toggleFaqElement(faq_elt, faq_id);
        }
    }
    $(this).fixSubMenuNav();
    $("body").addClass("day-switch");
    $("body").bind("day-night-switch-night", function ()
    {
        $("body").removeClass("day-switch").addClass("night-switch");
    });
    $("body").bind("day-night-switch-day", function ()
    {
        $("body").removeClass("night-switch").addClass("day-switch");
    });
});
$(window).load(function ()
{
    if ($.browser.msieLTE8)
    {
        $("a.image-list-link, #standard-content.press-release-hub .list a.thumb-link").each(function ()
        {
            var parent_height = $(this).height();
            var image_height = $("img", this).height();
            var top_margin = (parent_height - image_height) / 2;
            if ($.browser.msie7)
            {
                top_margin -= 2;
            }
            $(this).children(":first").css("margin-top", top_margin);
        });
    }
});

function dropClear()
{
    $("#watchfinder-form input").attr("checked", false);
    $("#watchfinder-form .style-drop-title").text('All');
}